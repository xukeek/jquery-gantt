{"version":3,"file":"jquery-gantt.js","sources":["../src/Defaults.js","../src/func/lazyload.js","../src/Gantt.js","../src/Plugin.js"],"sourcesContent":["export default {\n  // user defined data array of event [source]\n  data: [],\n  // data URL\n  dataURL: '',\n  // start date calendar\n  startDate: new Date(),\n  // end date calendar\n  endDate: new Date(),\n  // cell width px\n  cellWidth: 20,\n  // cell height px\n  cellHeight: 38,\n  // language\n  language: 'en',\n  // sticky header\n  stickyHeader: false,\n  // mouse scroll\n  mouseScroll: false,\n  // mouse scroll px\n  mouseScrollpx: 120,\n  // lazy load\n  lazyLoad: false,\n  // auto hide\n  autoHide: false,\n  // onInit event\n  onInit: $.noop,\n  // onDestroy event\n  onDestroy: $.noop,\n};\n","import $ from 'jquery';\n\nexport default {\n  buildData() {\n    const url = this.config.dataURL;\n    return $.ajax({\n      url,\n      dataType: 'jsonp',\n      jsonp: 'callback',\n      crossDomain: true,\n      contentType: 'application/json',\n    });\n  },\n\n  initLazyLoad() {\n    const startDate = this.config.startDate;\n    const endDate = this.config.endDate;\n    startDate.setHours(0, 0, 0, 0);\n    endDate.setHours(0, 0, 0, 0);\n    this.scrollHandler();\n  },\n\n  renderLazyLoad(data, startDate, endDate) {\n    this.renderLazyLoadGrid(data, startDate, endDate);\n    const el = $(this.element);\n    const templateHeaderMonths = $('.gantt-header-months', el);\n    const templateHeaderDays = $('.gantt-header-days', el);\n    const templateHeaderDaysMin = $('.gantt-header-days-min', el);\n\n    // difference between start-date and end-date\n    const num = this.dateDiffInDays(startDate, endDate);\n    this.renderLazyLoadEvents(data, num);\n\n    for (let i = 0; i <= num; i += 1) {\n      const templateHeaderMonth = $('<div>', { class: 'gantt-header-month' });\n      const templateHeaderDay = $('<div>', { class: 'gantt-header-day' });\n      const templateHeaderDayMin = $('<div>', { class: 'gantt-header-day-min' });\n\n      // const weekOfday = startDate.getDay();\n      const day = startDate.getDate();\n      const month = startDate.getMonth() + 1;\n      const year = startDate.getFullYear();\n      let monthWidth = this.daysInMonth(month, year) * this.config.cellWidth;\n      // const weekOfdayName = this.config.region.dayNamesMin[weekOfday];\n      const monthName = this.config.region.monthNames[month - 1];\n\n      const dayTemplate = $(templateHeaderDay).text(day).css('width', this.config.cellWidth);\n      // const dayMinTemplate = $(templateHeaderDayMin).text(weekOfdayName)\n      //  .css({ width: this.config.cellWidth });\n      const monthTemplate = $(templateHeaderMonth).text(`${monthName} ${year}`).css({ width: monthWidth });\n\n      templateHeaderDays.append(dayTemplate);\n      templateHeaderDaysMin.append(templateHeaderDayMin);\n\n      const firstMonthIsNotFull = i === 0;\n\n      const firstDay = this.firstDayMonth(year, month);\n      firstDay.setHours(0, 0, 0, 0);\n      const firstDayEndDateMonth = this.firstDayMonth(\n        this.config.endDate.getFullYear(),\n        this.config.endDate.getMonth() + 1);\n      firstDayEndDateMonth.setHours(0, 0, 0, 0);\n\n      const checkFirstDayMonth = this.isEqual(startDate, firstDay);\n      const checkFirstDayMonthEndDate = this.isEqual(startDate, firstDayEndDateMonth);\n\n      if (checkFirstDayMonth || firstMonthIsNotFull) {\n        if (firstMonthIsNotFull) {\n          monthWidth -= ((day - 1) * this.config.cellWidth);\n        }\n\n        if (checkFirstDayMonthEndDate) {\n          monthWidth = (this.config.endDate.getDate() * this.config.cellWidth);\n        }\n\n        // var monthName = this.config.region.monthNames[month - 1];\n        // var monthTemplate = $(templateHeaderMonth).text(`${monthName} ${year}`)\n        //  .css({ width: monthWidth });\n\n        templateHeaderMonths.append(monthTemplate);\n      }\n\n      startDate.setDate(startDate.getDate() + 1);\n    }\n\n    const totalWidth = $('.gantt-header-day', el).length * this.config.cellWidth;\n    $(templateHeaderMonths, el).css({ width: totalWidth });\n    $(templateHeaderDays, el).css({ width: totalWidth });\n    $(templateHeaderDaysMin, el).css({ width: totalWidth });\n\n    const templateGrid = $('.gantt-grid', el);\n    $(templateGrid, el).css({ width: totalWidth });\n\n    const templateGridRow = $('.gantt-grid-row', el);\n    $(templateGridRow, el).css({ width: this.gridDefaults.gridtotalWidth });\n\n    const templateGridCol = $('.gantt-grid-col', el);\n    $(templateGridCol, el).css({ height: this.gridDefaults.gridtotalHeight });\n\n    $('.gantt-event-row', el).css({ width: this.gridDefaults.gridtotalWidth });\n\n    this.gridDefaults.eventsWidth = this.gridDefaults.gridtotalWidth;\n  },\n\n  renderLazyLoadGrid(data, startDate, endDate) {\n    const el = $(this.element);\n    // difference between start-date and end-date\n    const num = this.dateDiffInDays(startDate, endDate);\n    const totalWidth = this.getTotalWidth(num);\n    const totalHeight = this.getTotalHeight(data.length);\n    const templateGrid = $('.gantt-grid', el);\n    const templateGridCols = $('.gantt-grid-cols', el);\n    const templateGridRows = $('.gantt-grid-rows', el);\n\n    const sDate = new Date(startDate.getTime());\n    for (let i = 0; i <= num; i += 1) {\n      const templateGridCol = $('<div>', { class: 'gantt-grid-col', width: this.config.cellWidth, height: totalHeight });\n\n      // firefox width problem fix\n      templateGridCol.css('width', this.config.cellWidth);\n\n      const month = sDate.getMonth() + 1;\n      const year = sDate.getFullYear();\n\n      const lastDay = this.lastDayMonth(year, month);\n\n      if (this.isEqual(sDate, lastDay)) {\n        templateGridCol.css('border-color', '#bec5cc');\n      }\n\n      templateGridCols.append(templateGridCol);\n      // eslint-disable-line no-redeclare\n      sDate.setDate(sDate.getDate() + 1);\n    }\n\n    data.forEach(function () {\n      const templateGridRow = $('<div>', { class: 'gantt-grid-row', width: totalWidth, height: this.config.cellHeight });\n      templateGridRows.append(templateGridRow);\n    }, this);\n\n    templateGrid.append(templateGridCols).append(templateGridRows);\n\n    this.gridDefaults.gridtotalWidth += totalWidth;\n    this.gridDefaults.gridtotalHeight += totalHeight;\n  },\n\n  renderLazyLoadContainer() {\n    const template = $('<div>', { class: 'gantt-container' });\n    const templateWrapper = $('<div>', { class: 'gantt-wrapper' });\n\n    const templateHeader = $('<div>', { class: 'gantt-header' });\n    const templateHeaderMonths = $('<div>', { class: 'gantt-header-months' });\n    const templateHeaderDays = $('<div>', { class: 'gantt-header-days' });\n    const templateHeaderDaysMin = $('<div>', { class: 'gantt-header-days-min' });\n\n    const arrowLeft = '<div class=\"arrow arrow-left\"><span class=\"arrow-icon\"></span></div>';\n    const arrowRight = '<div class=\"arrow arrow-right\"><span class=\"arrow-icon\"></span></div>';\n\n    const templateGrid = $('<div>', { class: 'gantt-grid' });\n    const templateEvents = $('<div>', { class: 'gantt-events' });\n\n    const templateLoading = $('<div>', { class: 'gantt-loading', style: 'display: none' });\n\n    templateHeader.append($(templateHeaderMonths));\n    templateHeader.append($(templateHeaderDays));\n    templateHeader.append($(templateHeaderDaysMin));\n\n    const templateGridCols = $('<div>', { class: 'gantt-grid-cols' });\n    const templateGridRows = $('<div>', { class: 'gantt-grid-rows' });\n\n    templateGrid.append(templateGridCols).append(templateGridRows);\n\n    template.append(templateHeader).append(templateGrid).append(templateEvents);\n    templateWrapper.append(arrowLeft).append(template).append(arrowRight).append(templateLoading);\n    return templateWrapper;\n  },\n\n  renderLazyLoadEvents(data) {\n    const el = $(this.element);\n    const templateEvents = $('.gantt-events', el);\n\n    data.forEach(function (memberEvents) {\n      const templateEventRow = $('<div>', { class: 'gantt-event-row', width: this.totalWidth });\n      memberEvents.forEach(function (element) {\n        const itemStartDate = new Date(element.startdate);\n\n        const templateEvent = $('<div>', { class: 'gantt-event' });\n\n        const tourWidth = (parseInt(element.minNight, 10) + 1) * this.config.cellWidth;\n        const remDay = this.dateDiffInDays(this.config.startDate, itemStartDate);\n\n        const tooltipData = $.extend(element.tooltipData, { price: element.price });\n\n        let tourType = '';\n        if (element.type === 'Tur') {\n          tourType = 'tourFly';\n        } else if (element.type === 'TurBus') {\n          tourType = 'tourBus';\n        } else {\n          tourType = 'cruise';\n        }\n\n        const title = `${element.title}`;\n\n        const eventBlock = $('<a>', {\n          class: this.format('gantt-event-block {0}', tourType),\n          width: `${tourWidth}px`,\n          href: `/${element.url}`,\n          target: '_blank',\n        }).text(title).css('line-height', `${this.config.cellHeight - 28}px`).data('tooltip', this.tooltipView(tooltipData));\n\n        const left = (remDay * this.config.cellWidth) + this.gridDefaults.eventsWidth;\n\n        templateEventRow.append(templateEvent.css('left', left)\n          .append(eventBlock))\n          .css('height', this.config.cellHeight);\n      }, this);\n\n      templateEvents.append(templateEventRow);\n    }, this);\n\n    return templateEvents;\n  },\n};\n","import $ from 'jquery';\nimport DEFAULTS from './Defaults';\nimport lazyload from './func/lazyload';\n\nclass Gantt {\n  constructor(element, options) {\n    const gridDefaults = {\n      gridtotalHeight: 0,\n      gridtotalWidth: 0,\n      eventsWidth: 0,\n    };\n    const lang = options.language || DEFAULTS.language;\n    // eslint-disable-next-line no-param-reassign\n    options.lang = Gantt.LANGUAGES[lang];\n    // extend defaults with the init options.\n    this.config = $.extend({}, DEFAULTS, options);\n    // grid defaults\n    this.gridDefaults = $.extend({}, gridDefaults);\n    // store main DOM element.\n    this.element = element;\n    // no data source\n    if (this.config.dataURL === '' && this.config.data.length <= 0) console.warn('jquery-gantt: must provide a data source');\n    // dataURL is required\n    else if (this.config.dataURL === '' && this.config.lazyLoad) console.warn('jquery-gantt: dataURL is required for lazyLoad');\n    // initialize\n    else {\n      this.init();\n    }\n  }\n\n  init() {\n    this.hook('onInit');\n    let html = '';\n    // erasing all the content from the container\n    $(this.element).html(html);\n\n    if (this.config.endDate.getTime() > this.config.startDate.getTime()) {\n      // lazy load\n      if (this.config.lazyLoad) {\n        this.initLazyLoad();\n        html = this.renderLazyLoadContainer();\n      } else if (this.config.data.length <= 0 && this.config.dataURL !== '') {\n        this.buildData().then((data) => {\n          this.config.data = data.Items;\n          html = this.renderContainer();\n          $(this.element).html(html);\n          this.attachEvents(this.element, this.config);\n          this.tooltipHover();\n          this.colHighlighter();\n        });\n      } else {\n        html = this.renderContainer();\n      }\n\n      if (this.config.data.length > 0 || this.config.lazyLoad) {\n        $(this.element).html(html);\n        this.attachEvents(this.element, this.config);\n        this.tooltipHover();\n        this.colHighlighter();\n      }\n    } else {\n      console.warn('jquery-gantt: start-date is not greater than end-date');\n    }\n  }\n\n  hook(hookName) {\n    if (this.config[hookName] !== undefined) {\n      this.config[hookName].call(this.el);\n    }\n  }\n\n  attachEvents(el, options) {\n    // sticky header\n    if (options.stickyHeader) {\n      const stickyH = function () {\n        const top = $('.gantt-wrapper', el).offset().top;\n        const height = $('.gantt-wrapper', el).height();\n        if (top >= $(this).scrollTop() || $(this).scrollTop() >= ((top + height) - 80)) {\n          $('.gantt-header', el).css('position', 'static');\n          $('.arrow', el).css('position', 'static');\n        } else {\n          $('.arrow', el).css({\n            position: 'relative',\n            top: `${$(this).scrollTop() - top}px`,\n          });\n          $('.gantt-header', el).css({\n            position: 'relative',\n            top: `${$(this).scrollTop() - top}px`,\n            left: `${$(this).scrollLeft}px`,\n            'z-index': 1,\n          });\n        }\n      };\n      $(window).scroll(stickyH);\n    }\n    // scroll page horizontally with mouse wheel\n    if (options.mouseScroll) {\n      $('.gantt-container', el).on('wheel mousewheel', function (e) {\n        if (e.originalEvent.wheelDelta > 0 || e.originalEvent.detail < 0) {\n          this.scrollLeft -= options.mouseScrollpx;\n        } else {\n          this.scrollLeft += options.mouseScrollpx;\n        }\n      });\n    }\n    if (options.lazyLoad) {\n      const self = this;\n      let loading = false;\n      $('.gantt-container', el).scroll(function () {\n        if (this.scrollWidth - this.clientWidth - this.scrollLeft < 900 && !loading) {\n          loading = true;\n          self.scrollHandler(() => {\n            loading = false;\n          });\n        }\n      });\n    }\n    // scroll drag\n    $('.gantt-container', el)\n      .on('mousedown', function (event) {\n        $(this).data('down', true)\n          .data('x', event.clientX)\n          .data('scrollLeft', this.scrollLeft)\n          .addClass('dragging');\n        return false;\n      })\n      .on('mouseup', function () {\n        $(this).data('down', false).removeClass('dragging');\n      })\n      .on('mousemove', function (event) {\n        if ($(this).data('down') === true) {\n          this.scrollLeft = ($(this).data('scrollLeft') + $(this).data('x')) - event.clientX;\n        }\n\n        if (options.autoHide) {\n          const sl = this.scrollLeft;\n          let daywidth = sl / options.cellWidth;\n          daywidth = Math.floor(daywidth);\n\n          const cWidth = daywidth * options.cellWidth;\n\n          const events = $('.gantt-events', el).find('.gantt-event');\n          $.each(events, (index, elem) => {\n            let eventLeft = $(elem).css('left');\n            eventLeft = parseInt(eventLeft, 10);\n            if (eventLeft <= cWidth) {\n              $(elem).closest('.gantt-event-row').hide();\n            } else {\n              $(elem).closest('.gantt-event-row').show();\n            }\n          });\n\n          const currentDay = new Date(options.startDate.getTime());\n          currentDay.setDate(currentDay.getDate() + daywidth);\n        }\n      })\n      .on('mouseleave', function () {\n        $(this).data('down', false).removeClass('dragging');\n      });\n\n    // arrow button click\n    $('.arrow', el).on('click', function () {\n      const direction = $(this).hasClass('arrow-right');\n      const scrollLeft = $('.gantt-container', el).scrollLeft();\n      if (direction) {\n        $('.gantt-container', el).scrollLeft(scrollLeft + 240);\n      } else {\n        $('.gantt-container', el).scrollLeft(scrollLeft - 240);\n      }\n    });\n  }\n\n  xhrRequest(startDate, endDate) {\n    const self = this;\n    const el = $(this.element);\n    const url = this.config.dataURL;\n    return $.ajax({\n      url,\n      dataType: 'jsonp',\n      jsonp: 'callback',\n      contentType: 'application/json',\n      crossDomain: true,\n      data: {\n        startDate: self.getFormattedDate(startDate),\n        endDate: self.getFormattedDate(endDate),\n      },\n      beforeSend() {\n        $('.gantt-loading', el).fadeIn();\n      },\n    });\n  }\n\n  scrollHandler(callback) {\n    const self = this;\n    const el = $(this.element);\n\n    const startDate = this.config.startDate;\n    let nextDate = new Date(this.config.startDate.getTime());\n\n    nextDate.setMonth(nextDate.getMonth() + 2);\n\n    const month = nextDate.getMonth() + 1;\n    const year = nextDate.getFullYear();\n    nextDate = this.lastDayMonth(year, month);\n\n    const monthEndDate = this.config.endDate.getMonth() + 1;\n    const yearEndDate = this.config.endDate.getFullYear();\n    const dayEndDate = this.config.endDate.getDate();\n\n    if (year === yearEndDate || year > yearEndDate) {\n      if (year > yearEndDate) {\n        nextDate.setMonth(monthEndDate - 1);\n        nextDate.setYear(yearEndDate);\n        nextDate.setDate(dayEndDate);\n      }\n      if (month === monthEndDate || month > monthEndDate) {\n        nextDate.setMonth(monthEndDate - 1);\n        nextDate.setDate(dayEndDate);\n      }\n    }\n\n    if (startDate.getTime() <= this.config.endDate.getTime()) {\n      this.xhrRequest(startDate, nextDate).done((data) => {\n        self.renderLazyLoad(data.Items, startDate, nextDate);\n        self.tooltipHover();\n        self.colHighlighter();\n        if (typeof callback === 'function') {\n          callback();\n        }\n      }).always(() => {\n        $('.gantt-loading', el).fadeOut();\n      });\n    }\n  }\n\n  isTimeInRange(year, month, day) {\n    const ranges = this.config.ranges;\n    let formatter = '{0}';\n    formatter += (month >= 10 ? '-{1}' : '-0{1}');\n    formatter += (day >= 10 ? '-{2}' : '-0{2}');\n    const thisDate = new Date(this.format(formatter, year, month, day));\n    for (let i = 0; i < ranges.length; i += 1) {\n      const begin = ranges[i][0];\n      const end = ranges[i][1];\n      if (thisDate >= new Date(begin) && thisDate <= new Date(end)) {\n        console.info(this.format('{0}-{1}-{2}', year, month, day));\n        return true;\n      }\n    }\n    return false;\n  }\n\n  renderHeader(num) {\n    const templateHeader = $('<div>', { class: 'gantt-header' });\n    const templateHeaderMonths = $('<div>', { class: 'gantt-header-months' });\n    const templateHeaderDays = $('<div>', { class: 'gantt-header-days' });\n    const templateHeaderDaysMin = $('<div>', { class: 'gantt-header-days-min' });\n\n    const totalWidth = this.getTotalWidth(num);\n\n    this.setHours();\n    const startDate = new Date(this.config.startDate.getTime());\n\n    for (let i = 0; i <= num; i += 1) {\n      const weekOfday = startDate.getDay();\n      const day = startDate.getDate();\n      const month = startDate.getMonth() + 1;\n      const year = startDate.getFullYear();\n      const isInRange = this.isTimeInRange(year, month, day);\n\n      const templateHeaderMonth = $('<div>', { class: 'gantt-header-month' }).toggleClass('range', isInRange);\n      const templateHeaderDay = $('<div>', { class: 'gantt-header-day' }).toggleClass('range', isInRange);\n      const templateHeaderDayMin = $('<div>', { class: 'gantt-header-day-min' }).toggleClass('range', isInRange);\n\n      let monthWidth = this.daysInMonth(month, year) * this.config.cellWidth;\n\n      const dayTemplate = $(templateHeaderDay).text(day).css('width', this.config.cellWidth);\n      $(templateHeaderDays).append(dayTemplate);\n\n      const weekOfdayName = this.config.lang.dayNamesMin[weekOfday];\n      const dayMinTemplate = $(templateHeaderDayMin).text(weekOfdayName)\n        .css({ width: this.config.cellWidth });\n      $(templateHeaderDaysMin).append(dayMinTemplate);\n\n      const firstMonthIsNotFull = i === 0;\n\n      const firstDay = this.firstDayMonth(year, month);\n      const firstDayEndDateMonth = this.firstDayMonth(\n        this.config.endDate.getFullYear(),\n        this.config.endDate.getMonth() + 1);\n\n      startDate.setHours(0, 0, 0, 0);\n      const checkFirstDayMonth = this.isEqual(startDate, firstDay);\n      const checkFirstDayMonthEndDate = this.isEqual(startDate, firstDayEndDateMonth);\n\n      if (checkFirstDayMonth || firstMonthIsNotFull) {\n        if (firstMonthIsNotFull) {\n          monthWidth -= ((day - 1) * this.config.cellWidth);\n        }\n\n        if (checkFirstDayMonthEndDate) {\n          monthWidth = (this.config.endDate.getDate() * this.config.cellWidth);\n        }\n\n        const monthName = this.config.lang.monthNames[month - 1];\n        const monthTemplate = $(templateHeaderMonth).text(`${year} ${monthName}`).css({ width: monthWidth });\n        $(templateHeaderMonths).append(monthTemplate);\n      }\n      startDate.setDate(startDate.getDate() + 1);\n    }\n\n    templateHeader.append($(templateHeaderMonths).css('width', totalWidth));\n    templateHeader.append($(templateHeaderDays).css('width', totalWidth));\n    templateHeader.append($(templateHeaderDaysMin).css('width', totalWidth));\n    return templateHeader;\n  }\n\n  renderContainer() {\n    const template = $('<div>', { class: 'gantt-container' });\n    const templateWrapper = $('<div>', { class: 'gantt-wrapper' });\n\n    const arrowLeft = '<div class=\"arrow arrow-left\"><span class=\"arrow-icon\"></span></div>';\n    const arrowRight = '<div class=\"arrow arrow-right\"><span class=\"arrow-icon\"></span></div>';\n\n    // difference between start-date and end-date\n    const diffInDays = this.dateDiffInDays(this.config.startDate, this.config.endDate);\n    const templateHeader = this.renderHeader(diffInDays);\n    const templateGrid = this.renderGrid(diffInDays);\n    const templateEvents = this.renderEvents(diffInDays);\n\n    template.append(templateHeader).append(templateGrid).append(templateEvents);\n    templateWrapper.append(arrowLeft).append(template).append(arrowRight);\n    return templateWrapper;\n  }\n\n  renderGrid(num) {\n    const data = this.config.data;\n    const totalWidth = this.getTotalWidth(num);\n    const totalHeight = this.getTotalHeight(data.length);\n\n    const templateGrid = $('<div>', { class: 'gantt-grid', width: totalWidth });\n    const templateGridCols = $('<div>', { class: 'gantt-grid-cols' });\n    const templateGridRows = $('<div>', { class: 'gantt-grid-rows' });\n\n    const startDate = new Date(this.config.startDate.getTime());\n\n    for (let i = 0; i <= num; i += 1) {\n      const templateGridCol = $('<div>', { class: 'gantt-grid-col', width: this.config.cellWidth, height: totalHeight });\n\n      // firefox width problem fix\n      templateGridCol.css('width', this.config.cellWidth);\n\n      const month = startDate.getMonth() + 1;\n      const year = startDate.getFullYear();\n\n      const lastDay = this.lastDayMonth(year, month);\n\n      startDate.setHours(0, 0, 0, 0);\n      if (this.isEqual(startDate, lastDay)) {\n        templateGridCol.css('border-color', '#bec5cc');\n      }\n\n      templateGridCols.append(templateGridCol);\n      startDate.setDate(startDate.getDate() + 1);\n    }\n\n    data.forEach(function () {\n      const templateGridRow = $('<div>', { class: 'gantt-grid-row', width: totalWidth, height: this.config.cellHeight });\n      templateGridRows.append(templateGridRow);\n    }, this);\n\n    templateGrid.append(templateGridCols).append(templateGridRows);\n\n    return templateGrid;\n  }\n\n  renderEvents(num) {\n    const data = this.config.data;\n    const totalWidth = this.getTotalWidth(num);\n    // const totalHeight = this.getTotalHeight(data.length);\n\n    const templateEvents = $('<div>', { class: 'gantt-events', width: totalWidth });\n\n    data.forEach((rowEvents) => {\n      const templateEventRow = $('<div>', { class: 'gantt-event-row', width: this.totalWidth });\n      rowEvents.forEach((el) => {\n        const itemStartDate = new Date(el.startdate);\n\n        const templateEvent = $('<div>', { class: 'gantt-event' });\n\n        const tourWidth = (parseInt(el.minNight, 10) + 1) * this.config.cellWidth;\n        const remDay = this.dateDiffInDays(this.config.startDate, itemStartDate);\n\n        const tooltipData = $.extend(el.tooltipData, { price: el.price });\n\n        let tourType = '';\n        if (el.type === 'Tur') {\n          tourType = 'tourFly';\n        } else if (el.type === 'TurBus') {\n          tourType = 'tourBus';\n        } else {\n          tourType = 'cruise';\n        }\n\n        const title = `${el.title}`;\n\n        const eventBlock = $('<a>', {\n          class: `gantt-event-block ${tourType}`,\n          width: `${tourWidth}px`,\n          href: `${el.url}`,\n          target: '_blank',\n        }).text(title).css('line-height', `${this.config.cellHeight - 28}px`).data('tooltip', this.tooltipView(tooltipData));\n\n        const left = ((remDay) * this.config.cellWidth);\n\n        templateEventRow\n          .append(templateEvent.css('left', left)\n            .append(eventBlock))\n          .css('height', this.config.cellHeight);\n      }, this);\n\n      templateEvents.append(templateEventRow);\n    }, this);\n\n    return templateEvents;\n  }\n\n  getTotalWidth(day) {\n    return day === 0 ? 0 : (day + 1) * this.config.cellWidth;\n  }\n\n  getTotalHeight(len) {\n    return len * this.config.cellHeight;\n  }\n\n  setHours() {\n    this.config.startDate.setHours(0, 0, 0, 0);\n    this.config.endDate.setHours(0, 0, 0, 0);\n  }\n\n  firstDayMonth(year, month) {\n    return new Date(year, month - 1, 1);\n  }\n\n  lastDayMonth(year, month) {\n    return new Date(year, month, 0);\n  }\n\n  daysInMonth(month, year) {\n    return new Date(year, month, 0).getDate();\n  }\n\n  isEqual(a, b) {\n    return a.getTime() === b.getTime();\n  }\n\n  dateDiffInDays(a, b) {\n    const MS_PER_DAY = 1000 * 60 * 60 * 24;\n    const utc1 = Date.UTC(a.getFullYear(), a.getMonth(), a.getDate());\n    const utc2 = Date.UTC(b.getFullYear(), b.getMonth(), b.getDate());\n    return Math.floor((utc2 - utc1) / MS_PER_DAY);\n  }\n\n  getFormattedDate(date) {\n    const currDate = date.getDate();\n    const currMonth = date.getMonth() + 1;\n    const currYear = date.getFullYear();\n    return `${currYear}-${currMonth}-${currDate}`;\n  }\n\n  tooltipView(data) {\n    const template = '' +\n      '<div class=\"gantt-tooltip\">' +\n      '    <div class=\"tooltip-content\">' +\n      '        <span class=\"title\">{1}</span>' +\n      '        <div class=\"desc\">' +\n      '            入组时间: {2} <br> 出组时间: {3} <br>' +\n      '        </div>' +\n      '    </div>' +\n      '</div>';\n\n    const html = this.format(template, data.memberName, data.inGroupTime, data.outGroupTime);\n    return html;\n  }\n\n  tooltipHover() {\n    const el = $(this.element);\n    const options = this.config;\n\n    // tooltip mouse enter & leave\n    $('.gantt-event-block', el)\n      .on('mouseenter', function () {\n        const elheight = $(el).height();\n        // const elwidth = $(el).width();\n        const eltop = $(el).offset().top;\n\n        let data = $(this).data('tooltip');\n        const left = $(this).offset().left;\n        const top = $(this).offset().top;\n\n        if (top >= ((elheight + eltop) - 168)) {\n          // position top\n          data = $(data).css({ left });\n          $('body').append(data);\n          const dheight = $('.gantt-tooltip', 'body').outerHeight();\n          $('.gantt-tooltip', 'body').css('top', top - dheight - 12);\n        } else {\n          // position bottom\n          data = $(data).css({\n            top: top + options.cellHeight,\n            left,\n          });\n          $('body').append(data);\n        }\n\n        $('.gantt-tooltip', 'body').hide().fadeIn(250);\n      })\n      .on('mouseleave', () => {\n        $('.gantt-tooltip', 'body').remove();\n      });\n  }\n\n  colHighlighter() {\n    const el = $(this.element);\n    // highlighter\n    $('.gantt-grid-col, .gantt-header-day, .gantt-header-day-min', el).on('mouseenter', function () {\n      // const grIndex = $(this).closest('.gantt-grid-col').index();\n      const gcIndex = $(this).index();\n\n      $('.gantt-container', el).find('.gantt-grid-col')\n        .removeClass('active')\n        .eq(gcIndex)\n        .addClass('active');\n      $('.gantt-header', el).find('.gantt-header-days').find('.gantt-header-day')\n        .removeClass('active')\n        .eq(gcIndex)\n        .addClass('active');\n      $('.gantt-container', el).find('.gantt-header').find('.gantt-header-days-min').find('.gantt-header-day-min')\n        .removeClass('active')\n        .eq(gcIndex)\n        .addClass('active');\n    });\n    // event hover\n    $('.gantt-event-block', el).on('mousemove', () => {\n      $('.gantt-container', el).find('.gantt-grid-col').removeClass('active');\n      $('.gantt-header', el).find('.gantt-header-days').find('.gantt-header-day').removeClass('active');\n      $('.gantt-container', el).find('.gantt-header').find('.gantt-header-days-min').find('.gantt-header-day-min')\n        .removeClass('active');\n    });\n  }\n\n  format() {\n    // eslint-disable-next-line prefer-rest-params\n    let theString = arguments[0];\n    for (let i = 1; i < arguments.length; i += 1) {\n      const regEx = new RegExp(`\\\\{${i - 1}\\\\}`, 'gm');\n      // eslint-disable-next-line prefer-rest-params\n      theString = theString.replace(regEx, arguments[i]);\n    }\n    return theString;\n  }\n\n  destroy() {\n    $(window).off('scroll');\n    this.element.empty();\n    this.element.removeData('plugin_Gantt');\n    this.hook('onDestroy');\n  }\n\n  static setDefaults(options) {\n    $.extend(DEFAULTS, options);\n  }\n\n}\n\nGantt.LANGUAGES = {\n  en: {\n    monthNames: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n    monthNamesShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],\n    dayNames: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],\n    dayNamesShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\n    dayNamesMin: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'],\n  },\n};\n\n$.extend(Gantt.prototype, lazyload);\n\nexport default Gantt;\n","import $ from 'jquery';\nimport Gantt from './Gantt';\n\nconst other = $.fn.gantt;\n\n$.fn.gantt = function (options) {\n  return this.each(function () {\n    if (!$.data(this, 'plugin_Gantt')) {\n      $.data(this, 'plugin_Gantt',\n        new Gantt($(this), options),\n      );\n    }\n  });\n};\n\n$.fn.gantt.version = '1.0.0';\n$.fn.gantt.l10n = Gantt.LANGUAGES;\n$.fn.gantt.setDefaults = Gantt.setDefaults;\n\n// No conflict\n$.fn.gantt.noConflict = function () {\n  $.fn.gantt = other;\n  return this;\n};\n"],"names":["Date","$","noop","url","config","dataURL","ajax","startDate","endDate","setHours","scrollHandler","data","renderLazyLoadGrid","el","element","templateHeaderMonths","templateHeaderDays","templateHeaderDaysMin","num","dateDiffInDays","renderLazyLoadEvents","i","templateHeaderMonth","class","templateHeaderDay","templateHeaderDayMin","day","getDate","month","getMonth","year","getFullYear","monthWidth","daysInMonth","cellWidth","monthName","region","monthNames","dayTemplate","text","css","monthTemplate","width","append","firstMonthIsNotFull","firstDay","firstDayMonth","firstDayEndDateMonth","checkFirstDayMonth","isEqual","checkFirstDayMonthEndDate","setDate","totalWidth","length","templateGrid","templateGridRow","gridDefaults","gridtotalWidth","templateGridCol","height","gridtotalHeight","eventsWidth","getTotalWidth","totalHeight","getTotalHeight","templateGridCols","templateGridRows","sDate","getTime","lastDay","lastDayMonth","forEach","cellHeight","template","templateWrapper","templateHeader","arrowLeft","arrowRight","templateEvents","templateLoading","style","memberEvents","templateEventRow","itemStartDate","startdate","templateEvent","tourWidth","parseInt","minNight","remDay","tooltipData","extend","price","tourType","type","title","eventBlock","format","tooltipView","left","Gantt","options","lang","language","DEFAULTS","LANGUAGES","console","warn","lazyLoad","init","hook","html","initLazyLoad","renderLazyLoadContainer","buildData","then","Items","renderContainer","attachEvents","tooltipHover","colHighlighter","hookName","undefined","call","stickyHeader","stickyH","top","offset","scrollTop","scrollLeft","window","scroll","mouseScroll","on","e","originalEvent","wheelDelta","detail","mouseScrollpx","self","loading","scrollWidth","clientWidth","event","clientX","addClass","removeClass","autoHide","sl","daywidth","Math","floor","cWidth","events","find","each","index","elem","eventLeft","closest","hide","show","currentDay","direction","hasClass","getFormattedDate","fadeIn","callback","nextDate","setMonth","monthEndDate","yearEndDate","dayEndDate","setYear","xhrRequest","done","renderLazyLoad","always","fadeOut","ranges","formatter","thisDate","begin","end","info","weekOfday","getDay","isInRange","isTimeInRange","toggleClass","weekOfdayName","dayNamesMin","dayMinTemplate","diffInDays","renderHeader","renderGrid","renderEvents","rowEvents","len","a","b","MS_PER_DAY","utc1","UTC","utc2","date","currDate","currMonth","currYear","memberName","inGroupTime","outGroupTime","elheight","eltop","dheight","outerHeight","remove","gcIndex","eq","theString","arguments","regEx","RegExp","replace","off","empty","removeData","prototype","lazyload","other","fn","gantt","version","l10n","setDefaults","noConflict"],"mappings":"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"}